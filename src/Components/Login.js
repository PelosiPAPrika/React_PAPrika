import { Button, TextField } from "@mui/material";
import { Box } from "@mui/system";
import { createTheme } from "@mui/material";
import axios from "axios";
import React, { useState } from "react";
import Constants from "../Utils/Constants";
import { useNavigate } from "react-router-dom";
import BackgroundImage from "../Images/bg.jpg";

const headers = {
  // "Access-Control-Allow-Origin": "*",
  //"Access-Control-Allow-Methods": "DELETE, POST, GET, OPTIONS",
  //"Access-Control-Allow-Headers": "*",
  //"Content-Type, Authorization, X-Requested-With": "*"
};

export default function LoginRectangle() {
  const [user, setUser] = useState("");
  const [password, setPassword] = useState("");

  const navigate = useNavigate();

  const handleKeyDown = (e) => {
    if(e.key === "Enter") {
      submitLogin()
    }
  }

  const submitLogin = () => {
    axios
      .post(
        `${Constants.BASE_URL}/login`,
        { username: user, password: password },
        { headers }
      )
      .then((response) => {
        console.log(response.data);
        localStorage.setItem("jwt-token", `Bearer ${response.data.jwtToken}`);
        navigate("/home");
      })
      .catch((error) => {
        console.log(error.code);
        console.log(error);
        alert("Preencha os campos corretamente");
      });
  };

  return (
    <div className="bg-[#141414] w-screen h-screen flex justify-center items-center">
      <div className="flex flex-col h-1/2 items-center">
        <svg
          className="mb-3"
          width="226"
          height="58"
          viewBox="0 0 226 58"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            d="M65.976 35.584H75.816C83.16 35.584 89.256 31.936 89.256 23.872C89.256 16.048 83.736 12.4 75.912 12.4H59.352V46H65.976V35.584ZM82.728 23.872C82.728 28.432 79.848 29.968 75.864 30.016H65.976V18.16H75.912C79.704 18.16 82.728 19.456 82.728 23.872ZM94.4606 30.64C97.1486 27.04 104.925 26.848 106.461 31.888H99.2126C94.1726 31.888 89.3246 33.664 89.3246 38.896C89.3246 44.272 94.1246 46.432 98.8766 46.48C101.997 46.48 105.357 45.28 106.941 42.784L107.517 46H113.085L112.845 41.104V32.416C112.845 25.936 106.749 22.384 100.845 22.384C96.9086 22.384 92.9726 23.44 90.5246 27.232L94.4606 30.64ZM99.6926 41.2C98.1566 41.248 95.5646 40.672 95.5166 38.896C95.4686 37.264 97.3406 36.4 99.0206 36.4H106.605C106.077 40.192 102.477 41.152 99.6926 41.2ZM116.602 23.152V56.752H122.794V43.312C124.426 45.76 126.73 46.432 129.226 46.432C136.811 46.432 141.659 41.2 141.659 34.576C141.659 28.96 138.107 23.296 130.282 22.768C127.354 22.576 124.282 23.488 122.41 26.32L121.786 23.152H116.602ZM129.035 28.192C133.306 28.192 135.418 31.552 135.418 34.576C135.418 37.744 133.306 40.96 129.035 40.96C124.906 40.96 122.506 38.08 122.554 34.432C122.554 30.88 125.098 28.192 129.035 28.192ZM144.553 23.152V46H150.745V33.856C150.889 30.448 153.529 28.24 156.601 28.24C158.041 28.24 159.481 28.816 160.537 29.776L163.273 25.648C161.449 23.392 158.473 22.624 156.217 22.624C154.393 22.624 151.897 23.2 150.217 25.84L149.833 23.152H144.553ZM171.101 19.792V12.4H164.957V19.792H171.101ZM171.101 46V23.152H164.957V46H171.101ZM199.098 45.856L187.674 33.472L198.474 23.392V23.152H190.65L184.218 29.104L181.098 32.848V12.4H174.954V46H181.146V39.088L183.498 36.88L191.898 46H199.098V45.856ZM203.604 30.64C206.292 27.04 214.068 26.848 215.604 31.888H208.356C203.316 31.888 198.468 33.664 198.468 38.896C198.468 44.272 203.268 46.432 208.02 46.48C211.14 46.48 214.5 45.28 216.084 42.784L216.66 46H222.228L221.988 41.104V32.416C221.988 25.936 215.892 22.384 209.988 22.384C206.052 22.384 202.116 23.44 199.668 27.232L203.604 30.64ZM208.836 41.2C207.3 41.248 204.708 40.672 204.66 38.896C204.612 37.264 206.484 36.4 208.164 36.4H215.748C215.22 40.192 211.62 41.152 208.836 41.2Z"
            fill="#F5F5F5"
          />
          <path
            fillRule="evenodd"
            clipRule="evenodd"
            d="M23.5608 0.289186C21.0257 1.06564 19.2236 3.85621 19.2182 7.0142C19.2165 7.98588 20.0037 8.7745 20.9753 8.7745H22.9823H25.4793C26.1952 8.7745 26.7899 8.22205 26.8424 7.50804C26.9215 6.43169 27.1481 6.07707 28.3534 5.14571C29.1334 4.54273 29.7715 3.92726 29.7715 3.77747C29.7715 3.49582 24.9139 -0.0481522 24.5947 0.000496217C24.4955 0.0155388 24.0303 0.145481 23.5608 0.289186ZM6.99007 11.141C3.89373 12.2273 1.42101 14.9913 0.421456 18.4824C-0.343964 21.1565 -0.0329426 28.0579 1.08005 33.0987C2.82265 40.9913 6.03212 49.3128 8.43173 52.16C10.2663 54.337 13.3195 55.4607 15.6656 54.8219C16.3462 54.6369 16.327 54.5805 15.1028 53.1681C12.1199 49.7263 10.1324 43.2019 8.50232 31.4985C6.95037 20.3567 8.18626 15.2463 13.3539 11.4399C13.742 11.1541 13.5386 10.5385 13.0565 10.5403L11.6207 10.5454C9.59231 10.5524 8.13269 10.7403 6.99007 11.141ZM32.6075 11.4079C37.7786 15.2537 39.0419 20.4092 37.4915 31.3384C35.7171 43.8488 33.7694 50.1372 30.6339 53.4799L30.327 53.8071C29.9812 54.1758 30.178 54.781 30.6746 54.8756C32.9998 55.3186 35.742 54.2775 37.4483 52.3034C39.565 49.8549 42.563 42.6178 44.2691 35.8397C45.4797 31.0289 46 27.3742 46 23.6824C46 18.3448 45.0143 15.4909 42.3506 13.1154C40.2784 11.2674 38.699 10.7396 34.8133 10.5975L32.9168 10.528C32.4377 10.5105 32.2228 11.1218 32.6075 11.4079ZM18.9724 12.6312C16.7288 13.2447 15.6211 13.865 14.211 15.2972C11.0529 18.5048 10.6202 22.0171 12.1167 32.2986C14.0033 45.257 16.3087 51.131 20.2738 53.0805C23.7852 54.8072 27.4219 53.1205 29.7059 48.7059C31.2349 45.7509 32.3113 41.8465 33.3918 35.3391C35.3446 23.5777 35.1798 19.5895 32.5993 16.1534C30.1061 12.8334 24.0026 11.2559 18.9724 12.6312Z"
            fill="#F5F5F5"
          />
        </svg>
        <input
          className="font-sans m-5 w-72 bg-transparent border-[1px] border-[#636363] box-border rounded-lg p-3 text-[#f5f5f5]"
          placeholder="Username"
          onInput={(e) => setUser(e.target.value)}
        />
        <input
          className="font-sans m-5 w-72 bg-transparent border-[1px] border-[#636363] box-border rounded-lg p-3 text-[#f5f5f5]"
          placeholder="Password"
          type="password"
          onInput={(e) => setPassword(e.target.value)}
          onKeyDown={(e) => handleKeyDown(e)}
        />
        <button className="font-bold m-5 w-72 h-11 bg-[#f5f5f5] shadow-md rounded-lg"
        onClick={() => submitLogin()}>
          Login
        </button>
      </div>
    </div>
  );
}
